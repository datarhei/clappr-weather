!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@clappr/core")):"function"==typeof define&&define.amd?define(["@clappr/core"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).Weather=e(t.Clappr)}(this,(function(t){"use strict";function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,a=n(t);if(e){var o=n(this).constructor;i=Reflect.construct(a,arguments,o)}else i=a.apply(this,arguments);return r(this,i)}}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}(".weather[data-weather] {\n  position: absolute;\n  height: 20px;\n  width: 100%;\n  z-index: 11;\n  top: 0;\n  left: 0;\n  transition: opacity 0.75s ease;\n}\n.weather[data-weather] ul {\n  margin: 0;\n  padding: 10px;\n  display: table;\n  width: 100%;\n}\n.weather[data-weather] ul li {\n  display: inline-table;\n  text-align: center;\n  white-space: nowrap;\n  background-color: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  padding: 4px 10px;\n  border-radius: 5px;\n  margin: 2px;\n  font-size: 16px;\n}");return function(n){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(l,n);var r,o,u,s=a(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=s.call(this,t)).configure(),e}return r=l,(o=[{key:"name",get:function(){return"weather"}},{key:"template",get:function(){return t.template('<ul>\n\t<% if (temperature !== undefined) { %>\n\t<li class="temperature">\n\t\tüå°Ô∏è <%= temperature %><p></p>\n\t</li>\n\t<% }; %>\n\t<% if (precipitation !== undefined) { %>\n\t\t<% if (precipitation.mode === \'rain\' || precipitation.mode === \'none\') { %>\n\t\t<li class="rain">\n\t\t\tüåßÔ∏è <%= precipitation.value %><p></p>\n\t\t</li>\n\t\t<% }; %>\n\t\t<% if (precipitation.mode === \'snow\') { %>\n\t\t<li class="snow">\n\t\t\tüå®Ô∏è <%= precipitation.value %><p></p>\n\t\t</li>\n\t\t<% }; %>\n\t<% }; %>\n\t<% if (winddirection !== undefined) { %>\n\t<li class="wind-direction">\n\t\tüå¨Ô∏è <%= winddirection %><p></p>\n\t</li>\n\t<% }; %>\n\t<% if (windspeed !== undefined) { %>\n\t<li class="wind">\n\t\tüå¨Ô∏è <%= windspeed %><p></p>\n\t</li>\n\t<% }; %>\n</ul>\n')}},{key:"attributes",get:function(){return{class:this.name,"data-weather":""}}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,t.Events.CONTAINER_PLAY,(function(){e.show()})),this.listenTo(this.container,t.Events.CONTAINER_STOP,(function(){e.hide()})),this.listenTo(this.container,t.Events.CONTAINER_OPTIONS_CHANGE,this.configure)}},{key:"configure",value:function(){this.hasData=!1,this.url=null,this.rewrite=null,this.refresh=5,this.units="metric",this.data=null;var t=this.options.weatherConfig||{};"rewrite"in t&&"function"==typeof t.rewrite&&(this.rewrite=t.rewrite),"url"in t&&(this.url=t.url),"refresh"in t&&(this.refresh=parseInt(t.refresh)),"units"in t&&"imperial"===t.units&&(this.units="imperial"),this.load(),this.render()}},{key:"destroy",value:function(){this.$el.remove()}},{key:"render",value:function(){return this.$el.hide(),this.container.$el.append(this.$el),this}},{key:"disable",value:function(){this.enabled=!1,this.hide()}},{key:"enable",value:function(){this.enabled=!0,this.show(),this.load()}},{key:"update",value:function(t){if(null!==t){this.hasData=!0;var e,n,i,r=void 0,a=void 0,o=void 0;"imperial"===this.units?(r=this._convertToFahrenheit(t.temperature_c).toFixed(1)+" ¬∞F",a=t.winddirection.toFixed(0)+"¬∞ "+this._getHeading(t.winddirection),o=this._convertToMPH(t.windspeed_ms).toFixed(1)+" mph"):(r=t.temperature_c.toFixed(1)+" ¬∞C",a=t.winddirection.toFixed(0)+"¬∞ "+this._getHeading(t.winddirection),o=t.windspeed_ms.toFixed(1)+" m/s"),e={value:("none"===t.precipitation.mode?"0":t.precipitation.value_mm.toFixed(1))+" mm",mode:t.precipitation.mode},n=t.pressure_hpa.toFixed(2)+" hpa",i=t.humidity.toFixed(0)+"%",this.$el.html(this.template({temperature:r,precipitation:e,winddirection:a,windspeed:o,pressure:n,humidity:i,timestamp:void 0}))}}},{key:"_convertToFahrenheit",value:function(t){return 1.8*t+32}},{key:"_convertToMPH",value:function(t){return t/1.609344*1e3/3600}},{key:"_getHeading",value:function(t){if(t<0||t>360)return"--";var e="N NNE NE ENE E ESE SE SSE S SSW SW WSW W WNW NW NNW".split(" "),n=0,i=Math.floor(360/e.length),r=Math.floor(i/2);if(t<=r||t>=360-r)return"N";for(;r<=t;)n++,r+=i;return e[n]}},{key:"show",value:function(){1==this.enabled&&1==this.hasData&&(t.$(".clappr-watermark[data-watermark]").css("transition","top .4s ease-out"),t.$(".clappr-watermark[data-watermark-top-left]").css("top","50px"),t.$(".clappr-watermark[data-watermark-top-right]").css("top","50px"),this.$el.show(),this.$el.css("opacity",1))}},{key:"hide",value:function(){this.$el.css("opacity",0),this.$el.hide(),t.$(".clappr-watermark[data-watermark]").css("transition","top .4s ease-out"),t.$(".clappr-watermark[data-watermark-top-left]").css("top","10px"),t.$(".clappr-watermark[data-watermark-top-right]").css("top","10px")}},{key:"load",value:function(){if(this.url&&!1!==this.enabled){var t=this,e=new XMLHttpRequest,n=this.url+(-1!==this.url.indexOf("?")?"&":"?")+Date.now();e.open("GET",n),e.onload=function(){if(e.readyState===e.DONE){if(200===e.status){var n=e.responseText,i=null;try{i=JSON.parse(n)}catch(t){i=n}null!==t.rewrite&&(i=t.rewrite(i)),t.update(i)}t.refresh>0&&setTimeout((function(){t.load()}),1e3*t.refresh)}},e.send()}}},{key:"pluginControl",value:function(){var t=this;return!1===this.hasData?null:{icon:function(){return!0===t.enabled?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBmaWxsPSJ3aGl0ZSI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik02Ljc2IDQuODRsLTEuOC0xLjc5LTEuNDEgMS40MSAxLjc5IDEuNzkgMS40Mi0xLjQxek00IDEwLjVIMXYyaDN2LTJ6bTktOS45NWgtMlYzLjVoMlYuNTV6bTcuNDUgMy45MWwtMS40MS0xLjQxLTEuNzkgMS43OSAxLjQxIDEuNDEgMS43OS0xLjc5em0tMy4yMSAxMy43bDEuNzkgMS44IDEuNDEtMS40MS0xLjgtMS43OS0xLjQgMS40ek0yMCAxMC41djJoM3YtMmgtM3ptLTgtNWMtMy4zMSAwLTYgMi42OS02IDZzMi42OSA2IDYgNiA2LTIuNjkgNi02LTIuNjktNi02LTZ6bS0xIDE2Ljk1aDJWMTkuNWgtMnYyLjk1em0tNy40NS0zLjkxbDEuNDEgMS40MSAxLjc5LTEuOC0xLjQxLTEuNDEtMS43OSAxLjh6Ii8+PC9zdmc+":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBmaWxsPSIjRkYwMDAwIj48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTYuNzYgNC44NGwtMS44LTEuNzktMS40MSAxLjQxIDEuNzkgMS43OSAxLjQyLTEuNDF6TTQgMTAuNUgxdjJoM3YtMnptOS05Ljk1aC0yVjMuNWgyVi41NXptNy40NSAzLjkxbC0xLjQxLTEuNDEtMS43OSAxLjc5IDEuNDEgMS40MSAxLjc5LTEuNzl6bS0zLjIxIDEzLjdsMS43OSAxLjggMS40MS0xLjQxLTEuOC0xLjc5LTEuNCAxLjR6TTIwIDEwLjV2Mmgzdi0yaC0zem0tOC01Yy0zLjMxIDAtNiAyLjY5LTYgNnMyLjY5IDYgNiA2IDYtMi42OSA2LTYtMi42OS02LTYtNnptLTEgMTYuOTVoMlYxOS41aC0ydjIuOTV6bS03LjQ1LTMuOTFsMS40MSAxLjQxIDEuNzktMS44LTEuNDEtMS40MS0xLjc5IDEuOHoiLz48L3N2Zz4="},name:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e="Weather";switch(t){case"de":e="Wetter"}return e},toggle:function(){return!0===t.enabled?t.disable():t.enable(),t.enabled},toggled:function(){return t.enabled}}}}])&&e(r.prototype,o),u&&e(r,u),l}(t.UIContainerPlugin)}));
//# sourceMappingURL=weather.min.js.map
