{"version":3,"file":"weather.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/main.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { Events, UIContainerPlugin, template, $ } from '@clappr/core';\nimport weatherHTML from './public/weather.html';\nimport './public/style.scss';\nimport icon from './public/icon.svg';\nimport icon_disabled from './public/icon_disabled.svg';\n\nconst DEFAULT_URL = null;\nconst DEFAULT_REFRESH = 5;\nconst DEFAULT_REWRITE = null;\nconst DEFAULT_UNITS = 'metric';\n\nexport default class Weather extends UIContainerPlugin {\n\tget name() {\n\t\treturn 'weather';\n\t}\n\n\tget template() {\n\t\treturn template(weatherHTML);\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\t'class': this.name,\n\t\t\t'data-weather': ''\n\t\t};\n\t}\n\n\tconstructor(container) {\n\t\tsuper(container);\n\t\tthis.configure();\n\t}\n\n\tbindEvents() {\n\t\tthis.listenTo(this.container, Events.CONTAINER_PLAY, () => {\n\t\t\tthis.show();\n\t\t});\n\t\tthis.listenTo(this.container, Events.CONTAINER_STOP, () => {\n\t\t\tthis.hide();\n\t\t});\n\t\tthis.listenTo(this.container, Events.CONTAINER_OPTIONS_CHANGE, this.configure);\n\t}\n\n\tconfigure() {\n\t\tthis.hasData = false;\n\n\t\tthis.url = DEFAULT_URL;\n\t\tthis.rewrite = DEFAULT_REWRITE;\n\t\tthis.refresh = DEFAULT_REFRESH;\n\t\tthis.units = DEFAULT_UNITS;\n\t\tthis.data = null;\n\n\t\tconst cfg = this.options.weatherConfig || {};\n\n\t\tif ('rewrite' in cfg) {\n\t\t\tif (typeof cfg.rewrite === 'function') {\n\t\t\t\tthis.rewrite = cfg.rewrite;\n\t\t\t}\n\t\t}\n\n\t\tif ('url' in cfg) {\n\t\t\tthis.url = cfg.url;\n\t\t}\n\n\t\tif ('refresh' in cfg) {\n\t\t\tthis.refresh = parseInt(cfg.refresh);\n\t\t}\n\n\t\tif ('units' in cfg) {\n\t\t\tif (cfg.units === 'imperial') {\n\t\t\t\tthis.units = 'imperial';\n\t\t\t}\n\t\t}\n\n\t\tthis.load();\n\t\tthis.render();\n\t}\n\n\tdestroy() {\n\t\tthis.$el.remove();\n\t}\n\n\trender() {\n\t\tthis.$el.hide();\n\n\t\tthis.container.$el.append(this.$el);\n\n\t\treturn this;\n\t}\n\n\tdisable() {\n\t\tthis.enabled = false;\n\n\t\tthis.hide();\n\t}\n\n\tenable() {\n\t\t//this.bindEvents();\n\t\tthis.enabled = true;\n\n\t\tthis.show();\n\t\tthis.load();\n\t}\n\n\tupdate(data) {\n\t\tif (data === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hasData = true;\n\n\t\tlet temperature = undefined;\n\t\tlet precipitation = undefined;\n\t\tlet winddirection = undefined;\n\t\tlet windspeed = undefined;\n\t\tlet pressure = undefined;\n\t\tlet humidity = undefined;\n\t\tlet timestamp = undefined;\n\n\t\tif (this.units === 'imperial') {\n\t\t\ttemperature = this._convertToFahrenheit(data.temperature_c).toFixed(1) + ' 째F';\n\t\t\twinddirection = data.winddirection.toFixed(0) + '째 ' + this._getHeading(data.winddirection);\n\t\t\twindspeed = this._convertToMPH(data.windspeed_ms).toFixed(1) + ' mph';\n\t\t}\n\t\telse {\n\t\t\ttemperature = data.temperature_c.toFixed(1) + ' 째C';\n\t\t\twinddirection = data.winddirection.toFixed(0) + '째 ' + this._getHeading(data.winddirection);\n\t\t\twindspeed = data.windspeed_ms.toFixed(1) + ' m/s';\n\t\t}\n\n\t\tprecipitation = {\n\t\t\tvalue: ((data.precipitation.mode === 'none') ? '0' : data.precipitation.value_mm.toFixed(1)) + ' mm',\n\t\t\tmode: data.precipitation.mode\n\t\t};\n\n\t\tpressure = data.pressure_hpa.toFixed(2) + ' hpa';\n\t\thumidity = data.humidity.toFixed(0) + '%';\n\n\t\tthis.$el.html(this.template({\n\t\t\ttemperature: temperature,\n\t\t\tprecipitation: precipitation,\n\t\t\twinddirection: winddirection,\n\t\t\twindspeed: windspeed,\n\t\t\tpressure: pressure,\n\t\t\thumidity: humidity,\n\t\t\ttimestamp: timestamp,\n\t\t}));\n\t}\n\n\t_convertToFahrenheit(_value) {\n\t\treturn (_value * 1.8) + 32;\n\t}\n\n\t_convertToMPH(_value) {\n\t\treturn (_value / 1.609344 * 1000 / 3600);\n\t}\n\n\t_getHeading(_direction) {\n\t\tif (_direction < 0 || _direction > 360) {\n\t\t\treturn '--';\n\t\t}\n\n\t\tconst directions = 'N NNE NE ENE E ESE SE SSE S SSW SW WSW W WNW NW NNW'.split(' ');\n\n\t\tlet direction = 0;\n\t\tconst step = Math.floor(360 / directions.length);\n\t\tlet i = Math.floor(step / 2);\n\n\t\tif (_direction <= i || _direction >= 360 - i) {\n\t\t\treturn 'N';\n\t\t}\n\n\t\twhile (i <= _direction) {\n\t\t\tdirection++;\n\t\t\ti += step;\n\t\t}\n\n\t\treturn directions[direction];\n\t}\n\n\tshow() {\n\t\tif (this.enabled == true && this.hasData == true) {\n\t\t\t$('.clappr-watermark[data-watermark]').css('transition', 'top .4s ease-out');\n\t\t\t$('.clappr-watermark[data-watermark-top-left]').css('top', '50px');\n\t\t\t$('.clappr-watermark[data-watermark-top-right]').css('top', '50px');\n\t\t\tthis.$el.show();\n\t\t\tthis.$el.css('opacity', 1);\n\t\t}\n\n\t\treturn;\n\t}\n\n\thide() {\n\t\tthis.$el.css('opacity', 0);\n\t\tthis.$el.hide();\n\t\t$('.clappr-watermark[data-watermark]').css('transition', 'top .4s ease-out');\n\t\t$('.clappr-watermark[data-watermark-top-left]').css('top', '10px');\n\t\t$('.clappr-watermark[data-watermark-top-right]').css('top', '10px');\n\t}\n\n\tload() {\n\t\tif (!this.url || this.enabled === false) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet self = this;\n\n\t\tlet r = new XMLHttpRequest();\n\t\tlet url = this.url + (this.url.indexOf('?') !== -1 ? '&' : '?') + Date.now();\n\n\t\tr.open('GET', url);\n\t\tr.onload = function() {\n\t\t\tif (r.readyState === r.DONE) {\n\t\t\t\tif (r.status === 200) {\n\t\t\t\t\tlet text = r.responseText;\n\n\t\t\t\t\tlet data = null;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdata = JSON.parse(text);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (error) {\n\t\t\t\t\t\tdata = text;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.rewrite !== null) {\n\t\t\t\t\t\tdata = self.rewrite(data);\n\t\t\t\t\t}\n\n\t\t\t\t\tself.update(data);\n\t\t\t\t}\n\n\t\t\t\tif (self.refresh > 0) {\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tself.load();\n\t\t\t\t\t}, self.refresh * 1000);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tr.send();\n\t}\n\n\t// PluginControl interface\n\tpluginControl() {\n\t\tlet self = this;\n\n\t\tif (this.hasData === false) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\ticon: function() {\n\t\t\t\tif (self.enabled === true) {\n\t\t\t\t\treturn icon;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn icon_disabled;\n\t\t\t\t}\n\t\t\t},\n\t\t\tname: function(lang = 'en') {\n\t\t\t\tlet name = 'Weather';\n\n\t\t\t\tswitch (lang) {\n\t\t\t\tcase 'de': name = 'Wetter'; break;\n\t\t\t\t}\n\n\t\t\t\treturn name;\n\t\t\t},\n\t\t\ttoggle: function() {\n\t\t\t\tif (self.enabled === true) {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tself.enable();\n\t\t\t\t}\n\n\t\t\t\treturn self.enabled;\n\t\t\t},\n\t\t\ttoggled: function() {\n\t\t\t\treturn self.enabled;\n\t\t\t}\n\t\t};\n\t}\n}\n"],"names":["DEFAULT_URL","DEFAULT_REFRESH","DEFAULT_REWRITE","DEFAULT_UNITS","Weather","container","configure","template","weatherHTML","name","listenTo","Events","CONTAINER_PLAY","show","CONTAINER_STOP","hide","CONTAINER_OPTIONS_CHANGE","hasData","url","rewrite","refresh","units","data","cfg","options","weatherConfig","parseInt","load","render","$el","remove","append","enabled","temperature","undefined","precipitation","winddirection","windspeed","pressure","humidity","timestamp","_convertToFahrenheit","temperature_c","toFixed","_getHeading","_convertToMPH","windspeed_ms","value","mode","value_mm","pressure_hpa","html","_value","_direction","directions","split","direction","step","Math","floor","length","i","$","css","self","r","XMLHttpRequest","indexOf","Date","now","open","onload","readyState","DONE","status","text","responseText","JSON","parse","error","update","setTimeout","send","icon","icon_disabled","lang","toggle","disable","enable","toggled","UIContainerPlugin"],"mappings":"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"}